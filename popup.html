<!doctype html> <html> <head> <meta charset="utf-8" /> <title>NevUp</title> <link rel="stylesheet" href="styles/extension.css" /> </head> <body class="nevup-popup"> <h3>NevUp Points</h3> <p>Points: <span id="points">0</span></p> <p>Rank: <span id="rank">-</span></p> <button id="refresh">Refresh</button> <p class="small"> Configure API in <a href="#" id="open-options">Options</a>. </p> <script src="popup.js"></script> </body> </html>
popup.js

Fetches user points via background script.

document.addEventListener("DOMContentLoaded", () => {
const pointsSpan = document.getElementById("points");
const rankSpan = document.getElementById("rank");
const refreshBtn = document.getElementById("refresh");
const optionsLink = document.getElementById("open-options");

function loadPoints() {
chrome.runtime.sendMessage({ type: "GET_POINTS" }, (response) => {
if (!response || !response.ok) {
pointsSpan.textContent = "0";
rankSpan.textContent = "-";
return;
}
const data = response.data || {};
pointsSpan.textContent = data.score ?? 0;
rankSpan.textContent = data.rank ?? "-";
});
}

refreshBtn.addEventListener("click", () => {
loadPoints();
});

optionsLink.addEventListener("click", (e) => {
e.preventDefault();
if (chrome.runtime.openOptionsPage) {
chrome.runtime.openOptionsPage();
} else {
window.open(chrome.runtime.getURL("options.html"));
}
});

loadPoints();
});
